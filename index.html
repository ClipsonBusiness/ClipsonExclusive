<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClipSon Exclusive - Premium Discord Community</title>
    <link rel="stylesheet" href="styles.css?v=2.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@700;900&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="images/clipson-logo.png">
    
    <!-- Trackdesk tracker begin -->
    <script async src="//cdn.trackdesk.com/tracking.js"></script> 
    <script>
    (function(t,d,k){(t[k]=t[k]||[]).push(d);t[d]=t[d]||t[k].f||function(){(t[d].q=t[d].q||[]).push(arguments)}})(window,"trackdesk","TrackdeskObject"); 
    
    trackdesk('clipson', 'click');
    </script>
    <!-- Trackdesk tracker end -->
    
    <!-- Affiliate Tracking Script - Stores ref and sends tracking event -->
    <script>
    (function () {
      'use strict';

      // ==============================
      // CONFIG (only edit these)
      // ==============================
      var TRACKING_ENDPOINT = 'https://clipson-affiliates.vercel.app/api/track/click';
      var COOKIE_DAYS = 30;
      var STORAGE_KEY = '__affiliate_data__';
      var SESSION_KEY = '__affiliate_click_sent__';
      var CAMPAIGN_ID = '1770600294862';

      // ==============================
      // HELPERS
      // ==============================
      function now() {
        return Date.now();
      }

      function parseJSON(value) {
        try { return JSON.parse(value); } catch { return null; }
      }

      function getStoredAffiliate() {
        var raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return null;

        var data = parseJSON(raw);
        if (!data || now() > data.expiresAt) {
          localStorage.removeItem(STORAGE_KEY);
          return null;
        }
        return data;
      }

      function saveAffiliate(data) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
      }

      function getParam(name) {
        return new URLSearchParams(window.location.search).get(name);
      }

      // ==============================
      // MAIN LOGIC
      // ==============================

      // Cleanup expired data
      getStoredAffiliate();

      var affiliateId = getParam('ref');

      // Only fire once per session
      if (affiliateId && !sessionStorage.getItem(SESSION_KEY)) {
        sessionStorage.setItem(SESSION_KEY, '1');

        var payload = {
          campaignId: CAMPAIGN_ID,
          affiliateId: affiliateId,
          url: window.location.href,
          landingPage: window.location.href,
          referrer: document.referrer || null,
          userAgent: navigator.userAgent,
          language: navigator.language,
          screen: window.screen.width + 'x' + window.screen.height,
          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
          timestamp: new Date().toISOString(),
          device: /Mobile|Android|iPhone|iPad/.test(navigator.userAgent) ? 'Mobile' : 'Desktop',
          country: null
        };

        // Persist affiliate attribution
        saveAffiliate({
          affiliateId: affiliateId,
          firstTouch: now(),
          expiresAt: now() + COOKIE_DAYS * 86400000
        });

        // First-party click tracking (hard to block)
        fetch(TRACKING_ENDPOINT, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload),
          keepalive: true
        }).catch(function () {});
      }

      // ==============================
      // STRIPE HELPER (GLOBAL)
      // ==============================
      window.getAffiliateMetadata = function () {
        var data = getStoredAffiliate();
        if (!data) return {};

        return {
          affiliateId: data.affiliateId,
          affiliateFirstTouch: String(data.firstTouch)
        };
      };

      // Legacy helper for backward compatibility
      window.getAffiliateId = function() {
        var data = getStoredAffiliate();
        return data ? data.affiliateId : null;
      };
    })();
    </script>
    
    <!-- Tracking Link Redirect Script (for non-ref paths) -->
    <script>
    (function() {
      // Only run on your custom domain
      if (window.location.hostname !== 'clipsonexclusive.com' && 
          window.location.hostname !== 'www.clipsonexclusive.com') {
        return;
      }

      // Skip redirect if there's a ref parameter (already handled above)
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.get('ref')) {
        return; // Don't redirect, let the tracking script handle it
      }

      // Get the current path (e.g., /ref=xxxx or /xxxxx)
      const path = window.location.pathname;
      
      // Skip if it's a root path or common paths
      if (path === '/' || path.startsWith('/api/') || path.startsWith('/_next/')) {
        return;
      }

      // Extract slug from path (remove leading slash)
      const slug = path.substring(1);
      
      // If there's a slug, redirect to tracking server
      if (slug && slug.length > 0) {
        const trackingUrl = 'https://tracking-system-production-d23c.up.railway.app/' + slug + window.location.search;
        window.location.href = trackingUrl;
      }
    })();
    </script>
</head>
<body id="top">
    
    <div class="gradient-waves-bg"></div>
    <div class="banner-navbar-gap"></div>

    <header>
        <nav>
            <a href="#top" class="logo-link"><div class="logo"><img src="images/clipson-logo.png" alt="ClipSon Logo" class="logo-img"></div></a>
            <div class="nav-links">
                <a href="#features" class="nav-link">Features</a>
                <a href="#interviews" class="nav-link">Student Interviews</a>
                <a href="#wins" class="nav-link">Student Wins</a>
                <a href="shop.html" class="nav-link">Shop</a>
            </div>
            <div class="nav-right">
                <a href="https://buy.stripe.com/14A00kgCkh0IcQhg2D5gc02" class="cta-button" target="_blank" rel="noopener">Join Now</a>
                <!-- Mobile Shop Button - Only visible on mobile -->
                <a href="shop.html" class="mobile-shop-button">Shop</a>
            </div>
        </nav>
    </header>

    <main>
        <section class="hero">
            <h1 class="hero-title">
                <span class="clipson-line">CLIPPING IS</span>
                <span class="skill-highlight">A SKILL</span>
            </h1>
            <p class="subtitle">We will teach you how to <span class="master-highlight">master it</span></p>

            <div class="intro-video-wrapper">
                <iframe 
                    title="vimeo-player" 
                    src="https://player.vimeo.com/video/1104560666?h=b810fe7cc9&dnt=1&title=0&byline=0&portrait=0&controls=1&logo=0" 
                    width="640" 
                    height="360" 
                    frameborder="0" 
                    allow="fullscreen; picture-in-picture"
                    allowfullscreen>
                </iframe>
            </div>

            <a href="https://buy.stripe.com/14A00kgCkh0IcQhg2D5gc02" class="cta-button large" target="_blank" rel="noopener">Join ClipSon Exclusive</a>

            <div class="price-tag">
                <span class="price">$49</span>
                <span class="period">/month</span>
            </div>

            <div class="join-row">
              <div class="avatars">
                <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User 1" class="avatar">
                <img src="https://randomuser.me/api/portraits/men/33.jpg" alt="User 2" class="avatar">
                <img src="https://randomuser.me/api/portraits/men/34.jpg" alt="User 3" class="avatar">
                <img src="https://randomuser.me/api/portraits/men/35.jpg" alt="User 4" class="avatar">
              </div>
              <span class="join-text">Join 70+ Like Minded People</span>
            </div>
        </section>

        <section id="features" class="benefits">
            <h2>Exclusive Opportunities</h2>
            <div class="benefits-grid">
                <div class="benefit-card">
                    <h3>Exclusive Opportunities</h3>
                    <p>Get long term access to the most valuable clipping opportunities on the market</p>
                </div>
                <div class="benefit-card">
                    <h3>Elite Network</h3>
                    <p>Connect with the world's top theme page owners and clippers</p>
                </div>
                <div class="benefit-card">
                    <h3>Exclusive Community</h3>
                    <p>Join a private Discord community of like minded people and network 24/7</p>
                </div>
            </div>
        </section>

        <section id="interviews" class="testimonials">
            <h2>STUDENT INTERVIEWS</h2>
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="video-container">
                        <iframe 
                            src="https://www.youtube.com/embed/BfQaoyq5sQ4" 
                            title="Student Interview - Gianni's Success Story"
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                        </iframe>
                    </div>
                    <h3>Gianni's Success Story</h3>
                    <p class="achievement">17 years old ‚Ä¢ üá≥üá± Netherlands</p>
                    <p>"Made 6000 euros in his first month after joining ClipSon Exclusive. Watch his journey to success!"</p>
                </div>
            </div>
        </section>

        <section id="wins" class="student-wins">
            <h2>STUDENT WINS</h2>
            <div class="wins-grid">
                <div class="win-card">
                    <img src="images/win1.jpg" alt="Soma 439 USDT" class="win-screenshot">
                    <div class="win-meta">Soma, 21 üá≠üá∫ Hungary</div>
                    <p class="win-description">439 USDT payout</p>
                </div>
                <div class="win-card">
                    <img src="images/win2.jpg" alt="Dino 619 USDT" class="win-screenshot">
                    <div class="win-meta">Dino, 15 üá®üá¶ Canada</div>
                    <p class="win-description">619 USDT payout</p>
                </div>
                <div class="win-card">
                    <img src="images/win3.jpg" alt="Riman $799.95" class="win-screenshot">
                    <div class="win-meta">Riman, 19 üá∏üá™ Sweden</div>
                    <p class="win-description">$799.95 quick payout</p>
                </div>
                <div class="win-card">
                    <img src="images/win4.jpg" alt="N3miroF new PC" class="win-screenshot">
                    <div class="win-meta">N3miroF, 32 üáµüá± Poland</div>
                    <p class="win-description">New PC from clipping money</p>
                </div>
                <div class="win-card">
                    <img src="images/win5.jpg" alt="pllandos 283 USDC" class="win-screenshot">
                    <div class="win-meta">pllandos, 20 üá¨üá∑ Greece</div>
                    <p class="win-description">283 USDC payout</p>
                </div>
                <div class="win-card">
                    <img src="images/win-tomasjr-payment.jpg" alt="ClipSon Payment Received" class="win-screenshot">
                    <div class="win-meta">Marlen, 19 üá≥üáµ Nepal</div>
                    <p class="win-description">$500 USD made in 3 days</p>
                </div>
                <div class="win-card">
                    <img src="images/win7.jpg" alt="Student Win 7" class="win-screenshot">
                    <div class="win-meta">Alex, 23 üá´üá∑ France</div>
                    <p class="win-description">2,152 USDT payout</p>
                </div>
                <div class="win-card">
                    <img src="images/win8.jpg" alt="Student Win 8" class="win-screenshot">
                    <div class="win-meta">Marc, 17 üá™üá∏ Spain</div>
                    <p class="win-description">1,496 USDT payout</p>
                </div>
                <div class="win-card">
                    <img src="images/win9.jpg" alt="Student Win 9" class="win-screenshot">
                    <div class="win-meta">Brian, 21 üá∫üá∏ United States</div>
                    <p class="win-description">2,700 USDT payout</p>
                </div>
            </div>
        </section>

        <section class="cta-section">
            <h2>THE CHOICE IS YOURS</h2>
            <div class="pricing-card">
                <h3>JOIN CLIPSON EXCLUSIVE</h3>
                <div class="price-tag">
                    <span class="price">$49</span>
                    <span class="period">/month</span>
                </div>
                <ul class="features-list">
                    <li>‚ú® Premium clipping opportunities</li>
                    <li>ü§ù Elite network access</li>
                    <li>üí° Expert strategies</li>
                    <li>üéØ Growth techniques</li>
                    <li>üìà Community support</li>
                </ul>
                <a href="https://buy.stripe.com/14A00kgCkh0IcQhg2D5gc02" class="cta-button large" target="_blank" rel="noopener">Join Now</a>
                <p class="guarantee">Cancel anytime, risk-free</p>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 ClipSon Exclusive. All rights reserved.</p>
    </footer>

    <script src="script.js?v=1.3"></script>
    
    <!-- Trackdesk set client_reference_id + Affiliate ID to Stripe links -->
    <script>
    (function () {
        // Get Trackdesk CID
        var cookie = document.cookie.match('(^|;)\\s*trakdesk_cid\\s*=\\s*([^;]+)');
        var trackdeskCid = null;
        if (Array.isArray(cookie)) {
            try {
                var trakdeskCidObj = JSON.parse(cookie.pop());
                trackdeskCid = trakdeskCidObj['cid'];
                console.log('Trackdesk CID found:', trackdeskCid);
            } catch (e) {
                console.log('Trackdesk error:', e);
            }
        }
        
        // Get Affiliate Metadata
        var affiliateData = window.getAffiliateMetadata ? window.getAffiliateMetadata() : {};
        var affiliateId = affiliateData.affiliateId || null;
        if (affiliateId) {
            console.log('Affiliate ID found:', affiliateId);
        }
        
        // Update all Stripe links
        document.querySelectorAll('a[href^="https://buy.stripe.com/"]').forEach(function (a) {
            var originalUrl = a.href;
            var url = new URL(a.href);
            
            // Affiliate ID takes priority for client_reference_id (for sales attribution)
            if (affiliateId) {
                url.searchParams.set('client_reference_id', affiliateId);
                console.log('Added affiliate ID to Stripe link:', affiliateId);
            } else if (trackdeskCid) {
                // Fallback to Trackdesk CID if no affiliate ID
                url.searchParams.set('client_reference_id', trackdeskCid);
            }
            
            // Also add affiliate_id as a separate parameter for tracking
            if (affiliateId) {
                url.searchParams.set('affiliate_id', affiliateId);
            }
            
            a.href = url.href;
            console.log('Payment link updated:', originalUrl, '‚Üí', a.href);
        });
    })();
    </script>
    <!-- Trackdesk set client_reference_id help fuction end -->
</body>
</html> 